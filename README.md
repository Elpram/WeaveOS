# WeaveOS

A lightweight, agent-native “ritual OS” for households (and later orgs). Users express intent in one line (optionally paste link(s)). Agents orchestrate; the UI stays out of the way.

## What’s in here

- **AGENTS.md** — commands/guardrails for agentic dev (Codex)
- **SPECS.md** — human-readable data + interaction model (mutable)
- **TASKS.md** — incremental, check-offable work plan
- **docs/ARCHITECTURE.md** — technology & architecture blueprint
- **api/openapi.yaml** — early API contract (additive changes only)
- **/public/** — (planned) minimal static UI (Home, Ritual page, Run mini-hub)
- **/src/**, **/tests/** — to be generated by Codex following AGENTS.md & TASKS.md

## Project principles

- **Lightweight for humans, heavy lifting for agents**
- **Small noun set**: Household, Ritual, Run, Artifact, Asset, Automation, Connection, Target, Constraint, Attention Item, Policy
- **Determinism**: short agent sessions, idempotent calls, clear triggers
- **No manual state**: external data only via Connections/Targets (MCP/iPaaS)

## Architecture snapshot

See [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) for the detailed technology stack, folder layout, and quality bar. Highlights:

- TypeScript + Fastify API with zod validation and structured logging
- Static-first UI served from `/public` with progressive enhancement via HTMX
- In-memory repositories with pluggable interfaces to prepare for future persistence
- Comprehensive testing strategy (Vitest, supertest, Playwright) plus lint/format/typecheck gates

## Getting started (intended commands)

Once Codex scaffolds the runtime, these will exist:

```sh
npm run bootstrap   # install deps
npm run dev         # start API + serve minimal UI
npm test            # unit tests
npm run e2e:smoke   # end-to-end smoke
npm run lint && npm run fmt
```

If a command is missing, implement it and update AGENTS.md.

## Minimal UI (planned)

- Home: single-line ritual creator (parse: name, cadence phrase, optional link); Upcoming; Needs Attention
- Ritual page: cadence badge, instant-runs badge, default inputs (pasted links), recent runs, “Create run now”
- Run mini-hub: status, next triggers, activity log, attention items (resolve/snooze), “Retry” chip

## Contribution flow

- Pick an item from TASKS.md
- Implement + tests green
- Update api/openapi.yaml if endpoints changed
- Check off the task with a one-line note
